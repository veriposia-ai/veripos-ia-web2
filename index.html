<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VeriPOS IA</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0e13; --panel:#0f141c; --panel-2:#0c1118; --line:#18212c;
    --fg:#eaf2ff; --muted:#9fb0c3; --blue:#0a84ff; --blue-2:#0f6bd1; --green:#16c784;
    --chip:#101827; --card:#0f121a; --shadow:0 20px 50px rgba(0,0,0,.45);
    --radius:14px
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial}
  /* Layout */
  .app{display:grid;grid-template-columns:260px 1fr 380px;gap:16px;min-height:100vh}
  aside{padding:18px 14px;border-right:1px solid var(--line);background:linear-gradient(180deg,#0d131b 0%,#0b0f16 100%)}
  main{padding:18px 8px 18px 0}
  .right{padding:18px 18px 18px 0}
  /* Sidebar */
  .brand{display:flex;align-items:center;gap:10px;margin-bottom:16px}
  .dot{width:10px;height:10px;border-radius:50%;background:var(--blue)}
  .brand b{font-size:1.05rem;letter-spacing:.3px}
  .nav{display:flex;flex-direction:column;gap:6px}
  .nav a{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;color:var(--fg);
         text-decoration:none;border:1px solid transparent}
  .nav a:hover{background:var(--panel);border-color:var(--line)}
  .nav a.active{background:var(--panel);border-color:var(--line)}
  .nav .ic{width:22px;text-align:center;opacity:.9}
  /* Top bar */
  .top{display:flex;align-items:center;gap:10px;margin-bottom:12px}
  .search{flex:1;display:flex;align-items:center;gap:8px;background:var(--panel);
          border:1px solid var(--line);border-radius:12px;padding:10px 12px}
  .search input{flex:1;background:transparent;border:0;color:var(--fg);outline:none}
  .chip{background:var(--chip);border:1px solid var(--line);color:var(--muted);padding:8px 12px;border-radius:999px}
  /* Tabs */
  .tabs{display:flex;gap:8px;border-bottom:1px solid var(--line);margin-bottom:12px}
  .tab{padding:10px 14px;border:1px solid var(--line);border-bottom:0;border-radius:10px 10px 0 0;background:var(--panel-2);color:var(--muted);cursor:pointer}
  .tab.active{background:var(--panel);color:#fff}
  /* Grid productos */
  .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:12px;box-shadow:var(--shadow);cursor:pointer;display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center}
  .thumb{width:54px;height:54px;border-radius:12px;background:
    radial-gradient(120px 60px at 20px 10px,#1e2735,#0e141e 70%);}
  .name{font-weight:600}
  .price{font-weight:700;color:#cfe3ff}
  /* Ticket */
  .ticket{position:sticky;top:18px;background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);
          padding:16px;box-shadow:var(--shadow)}
  .row{display:flex;justify-content:space-between;margin:.45rem 0}
  .row.total{font-size:1.1rem;font-weight:700}
  .btn{width:100%;background:var(--blue);border:none;color:#fff;padding:12px;border-radius:12px;
       cursor:pointer;font-weight:700}
  .btn:hover{background:var(--blue-2)}
  .btn.sec{background:#1a2230}
  .muted{color:var(--muted)}
  .split{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:center}
  /* Inicio de turno modal */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(6px)}
  .panel{width:min(520px,92vw);background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
  input,button{font-family:inherit}
  .in{width:100%;background:#0a1018;border:1px solid var(--line);border-radius:12px;padding:12px;color:#fff}
  @media (max-width:1100px){ .app{grid-template-columns:220px 1fr} .right{display:none} .grid{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:720px){ .app{grid-template-columns:1fr} aside{display:none} .grid{grid-template-columns:1fr 1fr} }
  @media print{ .app{grid-template-columns:1fr} aside,.top,.tabs,.grid,.btn,.modal{display:none!important} body{background:#fff;color:#000} .ticket{border:0;box-shadow:none} }
</style>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>

<div class="app">
  <!-- SIDEBAR -->
  <aside>
    <div class="brand"><span class="dot"></span><b>VeriPOS IA</b></div>
    <nav class="nav">
      <a class="active"><span class="ic">üè†</span>Inicio</a>
      <a><span class="ic">üí∏</span>Ventas</a>
      <a><span class="ic">üì¶</span>Productos</a>
      <a><span class="ic">üìä</span>Inventario</a>
      <a><span class="ic">üë•</span>Empleados</a>
      <a><span class="ic">üìà</span>Informes</a>
      <a><span class="ic">ü§ñ</span>IA Asistente</a>
      <a><span class="ic">‚öôÔ∏è</span>Ajustes</a>
    </nav>
  </aside>

  <!-- MAIN -->
  <main>
    <div class="top">
      <div class="search"><span>üîé</span><input id="buscar" placeholder="Escribe o di ‚ÄúSmash‚Äù"></div>
      <div class="chip">IGIC 7%</div>
    </div>

    <div class="tabs">
      <div class="tab active" data-cat="burgers">Burgers</div>
      <div class="tab" data-cat="bebidas">Bebidas</div>
      <div class="tab" data-cat="postres">Postres</div>
    </div>

    <div id="grid" class="grid"></div>
  </main>

  <!-- RIGHT: TICKET -->
  <section class="right">
    <div class="ticket">
      <div class="split">
        <h3 style="margin:0">Ticket</h3>
        <small class="muted" id="atendido">Atendido por: ‚Äî</small>
      </div>
      <hr style="border-color:#1a2230">
      <div id="lineas"></div>
      <hr style="border-color:#1a2230">
      <div class="row"><span>Subtotal</span><span id="subtotal">0,00 ‚Ç¨</span></div>
      <div class="row"><span>IGIC (7%)</span><span id="igic">0,00 ‚Ç¨</span></div>
      <div class="row total"><span>Total</span><span id="total">0,00 ‚Ç¨</span></div>
      <div id="qrBox" class="muted" style="margin:10px 0 6px"></div>
      <button id="btnCobrar" class="btn">Cobrar / Emitir ticket Veri*Factu</button>
      <button id="btnImprimir" class="btn sec" style="margin-top:8px;display:none">Imprimir ticket</button>
    </div>
  </section>
</div>

<!-- MODAL: INICIO DE TURNO -->
<div id="modal" class="modal">
  <div class="panel">
    <h3 style="margin:6px 0 10px">üëã Bienvenido, equipo VeriPOS IA</h3>
    <p class="muted" style="margin-top:0">Escribe tu nombre para que salga en el ticket.</p>
    <input id="nombre" class="in" placeholder="Ej. Laura">
    <<button id="btnTurno" class="btn" style="margin-top:12px"
onclick="(function(){var n=document.getElementById('nombre').value.trim();if(!n){alert('Escribe tu nombre');return;}document.querySelector('#atendido').textContent='Atendido por: '+n;document.getElementById('modal').style.display='none';})()">
  Comenzar turno
</button>
  </div>
</div>

<script>
  // ===== Datos base (con categor√≠as) =====
  const IGIC = 0.07;
  const productos = [
    {id:"b1", cat:"burgers",  name:"Smash Burger",  price:9.90},
    {id:"b2", cat:"burgers",  name:"Cheeseburger",  price:8.90},
    {id:"b3", cat:"burgers",  name:"Hamburguesa",  price:7.90},
    {id:"d1", cat:"bebidas",  name:"Refresco lata", price:2.00},
    {id:"d2", cat:"bebidas",  name:"Agua",          price:1.50},
    {id:"p1", cat:"postres",  name:"Brownie",       price:3.50},
    {id:"p2", cat:"postres",  name:"Helado",        price:2.80},
    {id:"x1", cat:"burgers",  name:"Papas fritas",  price:3.30}
  ];

  const state = { camarero:null, filtro:"burgers", q:"", carrito:[] };

  // ===== Utiles =====
  const ‚Ç¨ = n => (Number(n).toFixed(2).replace(".",","))+" ‚Ç¨";
  const el = s => document.querySelector(s);
  const els = s => [...document.querySelectorAll(s)];

  // ===== UI =====
  function pintarTabs(){
    els(".tab").forEach(t=>{
      t.classList.toggle("active", t.dataset.cat===state.filtro);
    });
  }

  function pintarProductos(){
    const grid = el("#grid"); grid.innerHTML="";
    const lista = productos
      .filter(p=>p.cat===state.filtro)
      .filter(p=>p.name.toLowerCase().includes(state.q));
    lista.forEach(p=>{
      const card = document.createElement("div");
      card.className="card";
      card.innerHTML = `
        <div class="thumb"></div>
        <div>
          <div class="name">${p.name}</div>
          <div class="muted">${p.cat[0].toUpperCase()+p.cat.slice(1)}</div>
        </div>
        <div class="price">${‚Ç¨(p.price)}</div>
      `;
      card.onclick = ()=>{ state.carrito.push(p); pintarTicket(); };
      grid.appendChild(card);
    });
  }

  function pintarTicket(){
    const cont = el("#lineas"); cont.innerHTML="";
    let subtotal=0;
    state.carrito.forEach(p=>{
      subtotal+=p.price;
      const row=document.createElement("div");
      row.className="row";
      row.innerHTML=`<span>${p.name}</span><span>${‚Ç¨(p.price)}</span>`;
      cont.appendChild(row);
    });
    const igic=subtotal*IGIC, total=subtotal+igic;
    el("#subtotal").textContent=‚Ç¨(subtotal);
    el("#igic").textContent=‚Ç¨(igic);
    el("#total").textContent=‚Ç¨(total);
  }

  // ===== Eventos =====
  els(".tab").forEach(t=>t.onclick=()=>{ state.filtro=t.dataset.cat; pintarTabs(); pintarProductos(); });
  el("#buscar").addEventListener("input",e=>{ state.q = e.target.value.trim().toLowerCase(); pintarProductos(); });

  el("#btnTurno").onclick=()=>{
    const n = el("#nombre").value.trim();
    if(!n){ alert("Escribe tu nombre"); return; }
    state.camarero=n;
    el("#atendido").textContent="Atendido por: "+n;
    el("#modal").style.display="none";
    pintarTabs(); pintarProductos();
  };

  el("#btnCobrar").onclick=async ()=>{
    if(!state.carrito.length){ alert("A√±ade productos"); return; }
    const payload = {
      fecha: new Date().toLocaleString(),
      camarero: state.camarero, total: el("#total").textContent
    };
    const box = el("#qrBox"); box.innerHTML="";
    await QRCode.toCanvas(JSON.stringify(payload), {width:160}, (err,canvas)=>{
      if(err){ alert("No se pudo generar el QR"); return; }
      box.appendChild(canvas);
    });
    el("#btnImprimir").style.display="block";
  };

  el("#btnImprimir").onclick = ()=> window.print();

  // Arranque
  pintarTabs(); // modal bloquea hasta poner nombre
</script>
</body>
</html>
